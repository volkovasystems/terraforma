{"version":3,"sources":["terraforma.js"],"names":["gulp","require","del","vinylPaths","concat","uglify","sourcemaps","rename","changed","cached","remember","newer","flatten","replace","insert","react","minifyCSS","less","filter","livereload","embedlr","plumber","connect","serveStatic","map","fs","path","argv","terraforma","options","INCLUDE_SCRIPT_PATTERN","RegExp","INCLUDE_STYLE_PATTERN","MINIFIED_SCRIPT_PATTERN","MINIFIED_STYLE_PATTERN","INCLUDE_SCRIPT_REPLACER","INCLUDE_STYLE_REPLACER","PRODUCTION_MODE_PATTERN","PRODUCTION_MODE_REPLACER","DEVELOPMENT_MODE_PATTERN","DEVELOPMENT_MODE_REPLACER","CLIENT_MODE_PATTERN","CLIENT_MODE_REPLACER","ADMINISTRATOR_MODE_PATTERN","ADMINISTRATOR_MODE_REPLACER","ADMINISTRATOR_DEVELOPMENT_MODE_PATTERN","ADMINISTRATOR_DEVELOPMENT_MODE_REPLACER","ADMINISTRATOR_PRODUCTION_MODE_PATTERN","ADMINISTRATOR_PRODUCTION_MODE_REPLACER","ADMINISTRATOR_ALL_MODE_PATTERN","CLEAN_UP_PATTERN","TEMPLATE_PATTERN","SUB_TEMPLATE_PATTERN","APPLICATION_NAME","appName","MODE_PATTERN","MODE_REPLACER","production","development","Error","ADMINISTRATOR_GENERAL_MODE_PATTERN","ADMINISTRATOR_GENERAL_MODE_REPLACER","administrator","ADMINISTRATOR_SPECIFIC_MODE_PATTERN","ADMINISTRATOR_SPECIFIC_MODE_REPLACER","CUSTOM_MODE_REPLACER","custom","CUSTOM_MODE_PATTERN","pathSteps","existsSync","resolve","scriptListPath","scriptList","task","src","read","pipe","libraryPaths","libraryExceptions","optimizeMemory","dest","sourcePaths","push","join","stream","file","callback","fileContent","contents","toString","templateFilePath","match","readFileSync","Buffer","init","customBuildPath","write","keepBreaks","customDeployPath","done","portNumber","process","config","port","env","PORT","server","use","listen","watch","module","exports"],"mappings":"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","file":"terraforma.min.js","sourcesContent":["\"use strict\";\n\nvar gulp = require( \"gulp\" );\nvar del = require( \"del\" );\nvar vinylPaths = require( \"vinyl-paths\" );\nvar concat = require( \"gulp-concat\" );\nvar uglify = require( \"gulp-uglify\" );\nvar sourcemaps = require( \"gulp-sourcemaps\" );\nvar rename = require( \"gulp-rename\" );\nvar changed = require( \"gulp-changed\" );\nvar cached = require( \"gulp-cached\" );\nvar remember = require( \"gulp-remember\" );\nvar newer = require( \"gulp-newer\" );\nvar flatten = require( \"gulp-flatten\" );\nvar replace = require( \"gulp-replace\" );\nvar insert = require( \"gulp-insert\" );\nvar react = require( \"gulp-react\" );\nvar minifyCSS = require( \"gulp-minify-css\" );\nvar less = require( \"gulp-less\" );\nvar filter = require( \"gulp-filter\" );\nvar livereload = require( \"gulp-livereload\" );\nvar embedlr = require( \"gulp-embedlr\" );\nvar plumber = require( \"gulp-plumber\" );\n\nvar connect = require( \"connect\" );\nvar serveStatic = require( \"serve-static\" );\nvar map = require( \"map-stream\" );\nvar fs = require( \"fs\" );\nvar path = require( \"path\" );\nvar argv = require( \"yargs\" ).argv;\n\nvar terraforma = function terraforma( options ){\n\tvar INCLUDE_SCRIPT_PATTERN = new RegExp(\n\t\t\"(?:\\\\<\\\\!\\\\-\\\\-\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@include\\\\-script\\\\:\"\n\t\t\t\t+ '(\\\\\"[^\\\\\"]+?\\\\\")'\n\t\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>)?\",\n\t\t\"g\" );\n\tvar INCLUDE_STYLE_PATTERN = new RegExp(\n\t\t\"(?:\\\\<\\\\!\\\\-\\\\-\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@include\\\\-style\\\\:\"\n\t\t\t\t+ '(\\\\\"[^\\\\\"]+?\\\\\")'\n\t\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>)?\",\n\t\t\"g\" );\n\n\tvar MINIFIED_SCRIPT_PATTERN = /\\.min\\./g;\n\tvar MINIFIED_STYLE_PATTERN = /\\.min\\./g;\n\n\tvar INCLUDE_SCRIPT_REPLACER = \"$1<script type=\\\"text/javascript\\\" src=$2></script>$3\";\n\tvar INCLUDE_STYLE_REPLACER = \"$1<link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=$2>$3\";\n\n\tvar REACTJS_DOM_FLAG = \"/** @jsx React.DOM */\\n\";\n\tvar REACTJS_DOM_FLAG_PATTERN = /\\/\\*\\*\\s*\\@jsx\\s+React\\.DOM\\s*\\*\\/\\n/g;\n\tvar REACTJS_DOM_FLAG_REPLACER = \"\";\n\n\tvar PRODUCTION_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@production\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+\"\\\\@end\\\\-production\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\tvar PRODUCTION_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar DEVELOPMENT_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@development\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-development\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\tvar DEVELOPMENT_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar CLIENT_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@client\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-client\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\tvar CLIENT_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar ADMINISTRATOR_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@administrator\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-administrator\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\tvar ADMINISTRATOR_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar ADMINISTRATOR_DEVELOPMENT_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@administrator-development\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-administrator-development\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\tvar ADMINISTRATOR_DEVELOPMENT_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar ADMINISTRATOR_PRODUCTION_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@administrator-production\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-administrator-production\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\tvar ADMINISTRATOR_PRODUCTION_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar ADMINISTRATOR_ALL_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@administrator\\\\-(?:development|production)\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-administrator\\\\-(?:development|production)\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\n\tvar CLEAN_UP_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@[a-z\\\\-]*[a-z]\\\\-mode\\\\:\"\n\t\t\t\t+ \"(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*\"\n\t\t\t\t+ \"([^]+?)\\\\s*\"\n\t\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\"\n\t\t\t+ \"\\\\@end\\\\-[a-z][a-z\\\\-]*[a-z]\\\\-mode\"\n\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\n\tvar TEMPLATE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\:|\\\\;\\\\s*\\\\/\\\\/\\\\:)?\\\\s*\"\n\t\t\t+ \"\\\\@template\\\\:\"\n\t\t\t\t+ \"\\\\s*([^\\\\s]+)\"\n\t\t+ \"\\\\s*(?:\\\\*\\\\/ \\\\}?)?\" );\n\n\tvar SUB_TEMPLATE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*\\\\/\\\\*\\\\:|\\\\;\\\\s*\\\\/\\\\/\\\\:)?\\\\s*\"\n\t\t\t+ \"\\\\@sub-template\\\\:\"\n\t\t\t\t+ \"\\\\s*([^\\\\s]+)\"\n\t\t+ \"\\\\s*(?:\\\\*\\\\/ \\\\}?)?\" );\n\n\tvar APPLICATION_NAME = argv.appName || options.appName;\n\n\tvar MODE_PATTERN = null;\n\tvar MODE_REPLACER = null;\n\tif( argv.production ){\n\t\tMODE_PATTERN = PRODUCTION_MODE_PATTERN;\n\t\tMODE_REPLACER = PRODUCTION_MODE_REPLACER;\n\n\t}else if( argv.development ){\n\t\tMODE_PATTERN = DEVELOPMENT_MODE_PATTERN;\n\t\tMODE_REPLACER = DEVELOPMENT_MODE_REPLACER;\n\n\t}else{\n\t\tthrow new Error( \"no mode provided\" );\n\t}\n\n\tvar ADMINISTRATOR_GENERAL_MODE_PATTERN = null;\n\tvar ADMINISTRATOR_GENERAL_MODE_REPLACER = null;\n\tif( argv.administrator ){\n\t\tADMINISTRATOR_GENERAL_MODE_PATTERN = ADMINISTRATOR_MODE_PATTERN;\n\t\tADMINISTRATOR_GENERAL_MODE_REPLACER = ADMINISTRATOR_MODE_REPLACER;\n\t\tCLIENT_MODE_REPLACER = \"\\n\";\n\n\t}else{\n\t\tADMINISTRATOR_GENERAL_MODE_PATTERN = ADMINISTRATOR_MODE_PATTERN;\n\t\tADMINISTRATOR_GENERAL_MODE_REPLACER = \"\\n\";\n\t}\n\n\tvar ADMINISTRATOR_SPECIFIC_MODE_PATTERN = null;\n\tvar ADMINISTRATOR_SPECIFIC_MODE_REPLACER = null;\n\tif( argv.administrator && argv.production ){\n\t\tADMINISTRATOR_SPECIFIC_MODE_PATTERN = ADMINISTRATOR_PRODUCTION_MODE_PATTERN;\n\t\tADMINISTRATOR_SPECIFIC_MODE_REPLACER = ADMINISTRATOR_PRODUCTION_MODE_REPLACER;\n\n\t}else if( argv.administrator && argv.development ){\n\t\tADMINISTRATOR_SPECIFIC_MODE_PATTERN = ADMINISTRATOR_DEVELOPMENT_MODE_PATTERN;\n\t\tADMINISTRATOR_SPECIFIC_MODE_REPLACER = ADMINISTRATOR_DEVELOPMENT_MODE_REPLACER;\n\n\t}else{\n\t\tADMINISTRATOR_SPECIFIC_MODE_PATTERN = ADMINISTRATOR_ALL_MODE_PATTERN;\n\t\tADMINISTRATOR_SPECIFIC_MODE_REPLACER = \"\\n\";\n\t}\n\n\tvar customBuild = argv.custom || options.custom || \"\";\n\n\tvar CUSTOM_MODE_REPLACER = \"\\n$1$2$3\\n\";\n\n\tvar CUSTOM_MODE_PATTERN = new RegExp(\n\t\t\"(?:\\\\{?\\\\s*)?(?:\\\\<\\\\!\\\\-\\\\-\\\\:|\\\\/\\\\*\\\\:|\\\\/\\\\/\\\\:)?(\\\\s*).*?\"\n\t\t\t+ \"\\\\@custom\\\\-mode\\\\:(?:\\\\s*\\\\*\\\\/ \\\\}?)?\\\\s*([^]+?)\\\\s*\"\n\t\t\t\t.replace( \"custom\", argv.custom )\n\t\t\t+ \"(?:\\\\{?\\\\s*\\\\/\\*\\\\s*|\\\\/\\\\/\\\\:\\\\s*)?\\\\@end\\\\-custom\\\\-mode\"\n\t\t\t\t.replace( \"custom\", argv.custom )\n\t\t\t+ \".*?(\\\\s*)(?:\\\\-\\\\-\\\\>|\\\\*\\\\/)?(?: \\\\}?)?\",\n\t\t\"gm\" );\n\n\tvar pathSteps = \"./\";\n\twhile( !fs.existsSync( path.resolve( pathSteps, \"script-list.js\" ) ) ){\n\t\tpathSteps = \"../\" + pathSteps;\n\t}\n\n\tvar scriptListPath = path.resolve( pathSteps, \"script-list.js\" );\n\tvar scriptList = options.scriptList || \n\t\trequire( scriptListPath );\n\n\tgulp.task( \"default\", [\n\t\t\"clean-library\",\n\t\t\"clean-build\",\n\t\t\"clean-deploy\",\n\n\t\t\"copy-library\",\n\t\t\"build-library\",\n\t\t\"deploy-library\",\n\n\t\t\"build-font\",\n\t\t\"deploy-font\",\n\n\t\t\"build-script\",\n\t\t\"deploy-script\",\n\n\t\t\"build-less\",\n\t\t\"build-style\",\n\t\t\"deploy-style\",\n\n\t\t\"build-image\",\n\t\t\"deploy-image\",\n\n\t\t\"build-index\",\n\t\t\"deploy-index\"\n\t] );\n\n\tgulp.task( \"clean\", [\n\t\t\"clean-library\",\n\t\t\"clean-build\",\n\t\t\"clean-deploy\",\n\t\t\"clean-temp\"\n\t] );\n\n\tgulp.task( \"clean-temp\",\n\t\tfunction cleanTask( ){\n\t\t\treturn gulp\n\t\t\t\t.src( \"temp\", { \"read\": false } )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( vinylPaths( del ) );\n\t\t} );\n\n\tgulp.task( \"link-library\", [\n\t\t\"clean-library\",\n\t\t\"copy-library\"\n\t] );\n\n\t//: This will remove only those that are older in the client/library\n\tgulp.task( \"clean-library\",\n\t\tfunction cleanTask( ){\n\t\t\treturn gulp\n\t\t\t\t.src( \"client/library\", { \"read\": false } )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( changed( \"temp/library\" ) )\n\t\t\t\t.pipe( vinylPaths( del ) );\n\t\t} );\n\n\tvar libraryPaths = [\n\t\t\"bower_components/*/*.css\",\n\t\t\"bower_components/*/*.map\",\n\t\t\"bower_components/*/*.js\",\n\t\t\"bower_components/*/*.eot\",\n\t\t\"bower_components/*/*.svg\",\n\t\t\"bower_components/*/*.ttf\",\n\t\t\"bower_components/*/*.woff\",\n\n\t\t\"bower_components/*/dist/**/*.eot\",\n\t\t\"bower_components/*/dist/**/*.svg\",\n\t\t\"bower_components/*/dist/**/*.ttf\",\n\t\t\"bower_components/*/dist/**/*.woff\",\n\t\t\"bower_components/*/dist/**/*.css\",\n\t\t\"bower_components/*/dist/**/*.map\",\n\t\t\"bower_components/*/dist/**/*.js\",\n\n\t\t\"bower_components/*/lib/**/*.js\",\n\n\t\t\"bower_components/*/build/**/*.js\",\n\t\t\"bower_components/*/build/**/*.css\",\n\n\t\t\"bower_components/*/css/*.css\",\n\n\t\t\"bower_components/*/fonts/*.eot\",\n\t\t\"bower_components/*/fonts/*.svg\",\n\t\t\"bower_components/*/fonts/*.ttf\",\n\t\t\"bower_components/*/fonts/*.woff\"\n\t];\n\n\tgulp.task( \"copy-library\",\n\t\t[ \"clean-library\" ],\n\t\tfunction copyTask( ){\n\t\t\treturn gulp\n\t\t\t\t.src( libraryPaths.concat( options.libraryExceptions ) )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"library\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( flatten( ) )\n\t\t\t\t.pipe( gulp.dest( \"temp/library\" ) )\n\t\t\t\t.pipe( changed( \"temp/library\" ) )\n\t\t\t\t.pipe( gulp.dest( \"client/library\" ) );\n\t\t} );\n\n\tgulp.task( \"build\", [\n\t\t\"clean-build\",\n\t\t\"build-script\",\n\t\t\"build-library\",\n\t\t\"build-font\",\n\t\t\"build-less\",\n\t\t\"build-style\",\n\t\t\"build-image\",\n\t\t\"build-index\"\n\t] );\n\n\tgulp.task( \"clean-build\",\n\t\t[ \"clean-library\", \"copy-library\" ],\n\t\tfunction cleanTask( ){\n\t\t\tvar sourcePaths = [ \"build\" ];\n\n\t\t\tif( argv.custom ){\n\t\t\t\tsourcePaths.push( [ \"build\", argv.custom ].join( \"-\" ) );\n\t\t\t}\n\n\t\t\treturn gulp\n\t\t\t\t.src( sourcePaths, { \"read\": false } )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( changed( \"client\" ) )\n\t\t\t\t.pipe( vinylPaths( del ) );\n\t\t} );\n\n\tgulp.task( \"build-script\",\n\t\t[ \"clean-build\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( scriptList )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"script:build\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( map( function attachTemplate( file, callback ){\n\t\t\t\t\tvar fileContent = file.contents.toString( \"utf8\" );\n\n\t\t\t\t\tvar templateFilePath = ( fileContent.match( TEMPLATE_PATTERN ) || [ ] )[ 1 ];\n\n\t\t\t\t\twhile( templateFilePath ){\n\t\t\t\t\t\ttemplateFilePath = path.resolve( pathSteps, \"client\", templateFilePath );\n\n\t\t\t\t\t\tfileContent = fileContent.replace( TEMPLATE_PATTERN, [\n\t\t\t\t\t\t\t\" (\", fs.readFileSync( templateFilePath ), \");\"\n\t\t\t\t\t\t].join( \"\\n\" ) );\n\n\t\t\t\t\t\ttemplateFilePath = ( fileContent.match( TEMPLATE_PATTERN ) || [ ] )[ 1 ];\n\t\t\t\t\t}\n\n\t\t\t\t\tfile.contents = new Buffer( fileContent );\n\n\t\t\t\t\tcallback( null, file );\n\t\t\t\t} ) )\n\t\t\t\t.pipe( map( function attachSubTemplate( file, callback ){\n\t\t\t\t\tvar fileContent = file.contents.toString( \"utf8\" );\n\n\t\t\t\t\tvar templateFilePath = ( fileContent.match( SUB_TEMPLATE_PATTERN ) || [ ] )[ 1 ];\n\n\t\t\t\t\twhile( templateFilePath ){\n\t\t\t\t\t\ttemplateFilePath = path.resolve( pathSteps, \"client\", templateFilePath );\n\n\t\t\t\t\t\tfileContent = fileContent.replace( SUB_TEMPLATE_PATTERN, [\n\t\t\t\t\t\t\t\"\", fs.readFileSync( templateFilePath ), \"\"\n\t\t\t\t\t\t].join( \"\\n\" ) );\n\n\t\t\t\t\t\ttemplateFilePath = ( fileContent.match( SUB_TEMPLATE_PATTERN ) || [ ] )[ 1 ];\n\t\t\t\t\t}\n\n\t\t\t\t\tfile.contents = new Buffer( fileContent );\n\n\t\t\t\t\tcallback( null, file );\n\t\t\t\t} ) )\n\t\t\t\t.pipe( react( ) )\n\t\t\t\t.pipe( replace( MODE_PATTERN, MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( ADMINISTRATOR_SPECIFIC_MODE_PATTERN, ADMINISTRATOR_SPECIFIC_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( ADMINISTRATOR_GENERAL_MODE_PATTERN, ADMINISTRATOR_GENERAL_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( CLIENT_MODE_PATTERN, CLIENT_MODE_REPLACER ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tstream = stream\n\t\t\t\t\t.pipe( replace( CUSTOM_MODE_PATTERN, CUSTOM_MODE_REPLACER ) )\n\t\t\t}\n\n\t\t\tstream = stream\n\t\t\t\t.pipe( replace( CLEAN_UP_PATTERN, \"\" ) )\n\t\t\t\t.pipe( remember( \"script:build\" ) )\n\t\t\t\t.pipe( sourcemaps.init( ) )\n\t\t\t\t.pipe( concat( [ APPLICATION_NAME, \"js\" ].join( \".\" ) ) )\n\t\t\t\t.pipe( gulp.dest( \"build/script\" ) );\n\n\t\t\tvar customBuildPath = \"\";\n\n\t\t\tif( argv.custom ){\n\t\t\t\tcustomBuildPath = \"build/script\"\n\t\t\t\t\t.replace( \"build\",\n\t\t\t\t\t\t[ \"build\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\tstream = stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\t\t\t}\n\n\t\t\tstream = stream\n\t\t\t\t.pipe( uglify( ) )\n\t\t\t\t.pipe( rename( [ APPLICATION_NAME, \"min\", \"js\" ].join( \".\" ) ) )\n\t\t\t\t.pipe( sourcemaps.write( \"./\" ) )\n\t\t\t\t.pipe( gulp.dest( \"build/script\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"build-library\",\n\t\t[ \"clean-library\", \"copy-library\", \"clean-build\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"client/library/*.*\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"library:build\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"build/library\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customBuildPath = \"build/library\"\n\t\t\t\t\t.replace( \"build\",\n\t\t\t\t\t\t[ \"build\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"build-font\",\n\t\t[ \"build-library\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( [\n\t\t\t\t\t\"client/library/*.eot\",\n\t\t\t\t\t\"client/library/*.svg\",\n\t\t\t\t\t\"client/library/*.ttf\",\n\t\t\t\t\t\"client/library/*.woff\"\n\t\t\t\t] )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"font:build\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"client/fonts\" ) )\n\t\t\t\t.pipe( gulp.dest( \"build/fonts\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customBuildPath = \"build/fonts\"\n\t\t\t\t\t.replace( \"build\",\n\t\t\t\t\t\t[ \"build\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"build-less\",\n\t\t[ \"clean-build\" ],\n\t\tfunction buildTask( ){\n\t\t\treturn gulp\n\t\t\t\t.src( \"client/style/*.less\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"less:build\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( remember( \"less:build\" ) )\n\t\t\t\t.pipe( less( ) )\n\t\t\t\t.pipe( filter( [ \"app.css\" ] ) )\n\t\t\t\t.pipe( rename( [ APPLICATION_NAME, \"css\" ].join( \".\" ) ) )\n\t\t\t\t.pipe( gulp.dest( \"temp/style\" ) );\n\t\t} );\n\n\tgulp.task( \"build-style\",\n\t\t[ \"clean-build\", \"build-less\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"temp/style/*.css\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( gulp.dest( \"build/style\" ) );\n\n\t\t\tvar customBuildPath = \"\";\n\t\t\tif( argv.custom ){\n\t\t\t\tcustomBuildPath = \"build/style\"\n\t\t\t\t\t.replace( \"build\",\n\t\t\t\t\t\t[ \"build\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\tstream = stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\t\t\t}\n\n\t\t\tstream = stream\n\t\t\t\t.pipe( sourcemaps.init( ) )\n\t\t\t\t.pipe( minifyCSS( { \"keepBreaks\": true } ) )\n\t\t\t\t.pipe( rename( [ APPLICATION_NAME, \"min\", \"css\" ].join( \".\" ) ) )\n\t\t\t\t.pipe( sourcemaps.write( \"./\" ) )\n\t\t\t\t.pipe( gulp.dest( \"build/style\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"build-image\",\n\t\t[ \"clean-build\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"client/image/*.*\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"image:build\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"build/image\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customBuildPath = \"build/image\"\n\t\t\t\t\t.replace( \"build\",\n\t\t\t\t\t\t[ \"build\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"build-index\",\n\t\t[ \"clean-build\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"client/index.html\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( replace( INCLUDE_SCRIPT_PATTERN, INCLUDE_SCRIPT_REPLACER ) )\n\t\t\t\t.pipe( replace( INCLUDE_STYLE_PATTERN, INCLUDE_STYLE_REPLACER ) )\n\t\t\t\t.pipe( replace( MINIFIED_SCRIPT_PATTERN, \".\" ) )\n\t\t\t\t.pipe( replace( MINIFIED_STYLE_PATTERN, \".\" ) )\n\t\t\t\t.pipe( replace( DEVELOPMENT_MODE_PATTERN, DEVELOPMENT_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( ADMINISTRATOR_SPECIFIC_MODE_PATTERN, ADMINISTRATOR_SPECIFIC_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( ADMINISTRATOR_GENERAL_MODE_PATTERN, ADMINISTRATOR_GENERAL_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( CLIENT_MODE_PATTERN, CLIENT_MODE_REPLACER ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tstream = stream\n\t\t\t\t\t.pipe( replace( CUSTOM_MODE_PATTERN, CUSTOM_MODE_REPLACER ) );\n\t\t\t}\n\n\t\t\tstream = stream\n\t\t\t\t.pipe( replace( CLEAN_UP_PATTERN, \"\" ) )\n\t\t\t\t.pipe( embedlr( ) )\n\t\t\t\t.pipe( gulp.dest( \"build\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customBuildPath = [ \"build\", argv.custom ].join( \"-\" );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\n\tgulp.task( \"deploy\", [\n\t\t\"clean-deploy\",\n\t\t\"deploy-script\",\n\t\t\"deploy-library\",\n\t\t\"deploy-font\",\n\t\t\"deploy-style\",\n\t\t\"deploy-image\",\n\t\t\"deploy-index\"\n\t] );\n\n\tgulp.task( \"clean-deploy\",\n\t\t[ \"clean-library\", \"copy-library\", \"clean-build\", \"build-library\" ],\n\t\tfunction cleanTask( ){\n\t\t\tvar sourcePaths = [ \"deploy\" ];\n\n\t\t\tif( argv.custom ){\n\t\t\t\tsourcePaths.push( [ \"deploy\", argv.custom ].join( \"-\" ) );\n\t\t\t}\n\n\t\t\treturn gulp\n\t\t\t\t.src( \"deploy\", { \"read\": false } )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( vinylPaths( del ) );\n\t\t} );\n\n\tgulp.task( \"deploy-script\",\n\t\t[ \"clean-build\", \"build-script\", \"clean-deploy\" ],\n\t\tfunction deployTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( [\n\t\t\t\t\t\"build/script/*.js\",\n\t\t\t\t\t\"build/script/*.map\"\n\t\t\t\t] )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"script:deploy\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"deploy/script\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customDeployPath = \"deploy/script\"\n\t\t\t\t\t.replace( \"deploy\",\n\t\t\t\t\t\t[ \"deploy\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customDeployPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"deploy-library\",\n\t\t[ \"clean-library\", \"copy-library\", \"clean-build\", \"build-library\", \"clean-deploy\" ],\n\t\tfunction deployTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"build/library/*.*\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"library:deploy\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"deploy/library\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customDeployPath = \"deploy/library\"\n\t\t\t\t\t.replace( \"deploy\",\n\t\t\t\t\t\t[ \"deploy\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customDeployPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"deploy-font\",\n\t\t[ \"deploy-library\" ],\n\t\tfunction deployTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( [\n\t\t\t\t\t\"build/library/*.eot\",\n\t\t\t\t\t\"build/library/*.svg\",\n\t\t\t\t\t\"build/library/*.ttf\",\n\t\t\t\t\t\"build/library/*.woff\"\n\t\t\t\t] )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"font:deploy\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"deploy/fonts\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customDeployPath = \"deploy/fonts\"\n\t\t\t\t\t.replace( \"deploy\",\n\t\t\t\t\t\t[ \"deploy\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customDeployPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"deploy-style\",\n\t\t[ \"clean-build\", \"build-less\", \"build-style\", \"clean-deploy\" ],\n\t\tfunction deployTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( [\n\t\t\t\t\t\"build/style/*.css\",\n\t\t\t\t\t\"build/style/*.map\"\n\t\t\t\t] )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"style:deploy\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"deploy/style\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customDeployPath = \"deploy/style\"\n\t\t\t\t\t.replace( \"deploy\",\n\t\t\t\t\t\t[ \"deploy\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customDeployPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"deploy-image\",\n\t\t[ \"clean-build\", \"clean-deploy\" ],\n\t\tfunction deployTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"build/image/*.*\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( cached( \"image:deploy\", { \"optimizeMemory\": true } ) )\n\t\t\t\t.pipe( gulp.dest( \"deploy/image\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customDeployPath = \"deploy/image\"\n\t\t\t\t\t.replace( \"deploy\",\n\t\t\t\t\t\t[ \"deploy\", argv.custom ].join( \"-\" ) );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customDeployPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"deploy-index\",\n\t\t[ \"clean-deploy\" ],\n\t\tfunction buildTask( ){\n\t\t\tvar stream = gulp\n\t\t\t\t.src( \"client/index.html\" )\n\t\t\t\t.pipe( plumber( ) )\n\t\t\t\t.pipe( replace( INCLUDE_SCRIPT_PATTERN, INCLUDE_SCRIPT_REPLACER ) )\n\t\t\t\t.pipe( replace( INCLUDE_STYLE_PATTERN, INCLUDE_STYLE_REPLACER ) )\n\t\t\t\t.pipe( replace( PRODUCTION_MODE_PATTERN, PRODUCTION_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( ADMINISTRATOR_SPECIFIC_MODE_PATTERN, ADMINISTRATOR_SPECIFIC_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( ADMINISTRATOR_GENERAL_MODE_PATTERN, ADMINISTRATOR_GENERAL_MODE_REPLACER ) )\n\t\t\t\t.pipe( replace( CLIENT_MODE_PATTERN, CLIENT_MODE_REPLACER ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tstream = stream\n\t\t\t\t\t.pipe( replace( CUSTOM_MODE_PATTERN, CUSTOM_MODE_REPLACER ) );\n\t\t\t}\n\n\t\t\tstream = stream\n\t\t\t\t.pipe( replace( CLEAN_UP_PATTERN, \"\" ) )\n\t\t\t\t.pipe( gulp.dest( \"deploy\" ) );\n\n\t\t\tif( argv.custom ){\n\t\t\t\tvar customBuildPath = [ \"deploy\", argv.custom ].join( \"-\" );\n\n\t\t\t\treturn stream\n\t\t\t\t\t.pipe( gulp.dest( customBuildPath ) );\n\n\t\t\t}else{\n\t\t\t\treturn stream;\n\t\t\t}\n\t\t} );\n\n\tgulp.task( \"server-static\",\n\t\tfunction serverTask( done ){\n\t\t\tvar portNumber = process.config.port || process.env.PORT || 8000;\n\t\t\tvar server = connect( );\n\t\t\tserver\n\t\t\t\t.use( serveStatic( \"build\" ) )\n\t\t\t\t.listen( portNumber, \"localhost\", done );\n\t\t} )\n\n\tvar server = livereload( );\n\n\tgulp.task( \"reload\", [ \"build\" ],\n\t\tfunction reloadTask( done ){\n\t\t\tserver.changed( );\n\t\t\tdone( );\n\t\t} );\n\n\tgulp.task( \"watch\",\n\t\t[\n\t\t\t\"clean-build\",\n\t\t\t\"build-script\",\n\t\t\t\"build-library\",\n\t\t\t\"build-font\",\n\t\t\t\"build-less\",\n\t\t\t\"build-style\",\n\t\t\t\"build-image\",\n\t\t\t\"build-index\",\n\t\t\t\"server-static\"\n\t\t],\n\t\tfunction watchTask( ){\n\t\t\tgulp.watch( [\n\t\t\t\t\"client/script/**\",\n\t\t\t\t\"client/style/**\",\n\t\t\t\t\"client/template/**\",\n\t\t\t\t\"client/index.html\",\n\t\t\t\tscriptListPath\n\t\t\t].concat( libraryPaths ),\n\t\t\t[ \"reload\" ] );\n\t\t} );\n\n\tgulp.task( \"serverless-watch\",\n\t\t[\n\t\t\t\"clean-build\",\n\t\t\t\"build-script\",\n\t\t\t\"build-library\",\n\t\t\t\"build-font\",\n\t\t\t\"build-less\",\n\t\t\t\"build-style\",\n\t\t\t\"build-image\",\n\t\t\t\"build-index\"\n\t\t],\n\t\tfunction watchTask( ){\n\t\t\tgulp.watch( [\n\t\t\t\t\"client/script/**\",\n\t\t\t\t\"client/style/**\",\n\t\t\t\t\"client/template/**\",\n\t\t\t\t\"client/script/**\",\n\t\t\t\t\"client/index.html\",\n\t\t\t\tscriptListPath\n\t\t\t].concat( libraryPaths ),\n\t\t\t[ \"reload\" ] );\n\t\t} );\n}\n\nmodule.exports = terraforma;\n"],"sourceRoot":"/source/"}